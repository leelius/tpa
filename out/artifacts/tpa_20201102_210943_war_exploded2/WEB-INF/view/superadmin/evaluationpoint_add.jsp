<!------------------------------->
<!---- Generated By Denny(luhox@qq.com), cslite for sm -->
<!---- Remarks: ItemListHTML-->
<!---- Date Generated: 2019-06-25 19:58:58-->
<!------------------------------->
<%@ page language="java" import="java.util.*" pageEncoding="UTF-8"%>
<c:set var="searchpanel" value="true"></c:set>
<c:set var="uploadfile" value="true"></c:set>
<c:set var="curl" value="${basePath}${pagename}" />
<!DOCTYPE html>
<html lang="zh-CN">
<head>
<jsp:include page="../inc/bsa_head.jsp"></jsp:include>
<jsp:include page="../inc/ket.jsp"></jsp:include>
<!-- Custom Styles-->
<link href="bssets/css/bsat1-style.css" rel="stylesheet" />
<title>${pagetitle}-${appName}</title>
</head>
<body>
	<div id="wrapper">
		<jsp:include page="../inc/bsa_navtop.jsp"></jsp:include>
		<!--/. NAV TOP  -->
		<jsp:include page="../inc/bsa_navside.jsp"></jsp:include>
		<!-- /. NAV SIDE  -->
		<div id="page-wrapper">
			<div class="header">
				<h3 class="page-header">
					${pagetitle} <small>${subtitle}：${subject.name} ~ ${type.name}</small>
				</h3>
			</div>
			<div id="page-inner">
				<!-- content start -->
				<!-- div Tables -->
				<div class="panel panel-default padding-vertical-md">
					<!-- div表格  (中大屏幕，表格显示) begin -->
					<!-- Advanced Tables -->
					<div class="row">
						<div class="col-md-12">
							<!-- content start -->
							<c:choose>
								<c:when test="${param.type==1}">
									<%-- 填空题修改 --%>
									<form class="form-horizontal padding-horizontal-sm"
										method="post" action="${curl}">
										<%-- 指定操作类型 --%>
										<input type="hidden" name="operate" value="addform" />
										<%-- 当前题号 --%>
										<input type="hidden" name="id" value="${param.id}" />
										<%-- 填空题类型1 --%>
										<input type="hidden" name="evType" value="1" />
										<%-- 填空题默认1个标准答案，可以调整为多个 --%>
										<input type="hidden" id="itnum1" name="itnum1" value="1" />
										<%-- 题目所属科目 --%>
										<!-- selectbox begin -->
										<div class="form-group">
											<label for="subject_id" class="col-sm-2 control-label">所属科目</label>
											<div class="col-sm-10">
												<select class="selectbox" id="subject_id" name="subject_id"
													style="width: 100%;">
													<c:forEach var="it" items="${subjectlist}" varStatus="i">
														<option value="${it.id}"
															<c:if test="${it.id==param.sid}">selected</c:if>>${it.name}</option>
													</c:forEach>
												</select>
											</div>
										</div>
										<!-- selectbox end -->
										<div id="form1">
											<div class="form-group">
												<label for="difficulty" class="col-sm-2 control-label">难度</label>
												<div class="col-sm-10">
													<input type="number" class="form-control restrictnumber"
														min="1" max="5" maxlength="1" id="difficulty"
														name="difficulty" placeholder="难度" value="3" required>
												</div>
											</div>
											<div class="form-group">
												<label for="difficulty" class="col-sm-2 control-label">问题</label>
												<div class="col-sm-8">
													<textarea rows="3" style="width: 100%;"
														class="form-control" placeholder="问题题目" id="evptitle1"
														name="evptitle1"></textarea>
												</div>
												<div class="col-sm-2">
													<input class="btn btn-info" type="button" id="add1"
														value="加" /> <input class="btn btn-info" type='button'
														id="delete1" value='减' />
												</div>
											</div>
											<div class="clearfix"></div>
											<div class="form-group">
												<label for="evpContent" class="col-sm-2 control-label">正确答案1</label>
												<div class="col-sm-10">
													<input type="text" class="form-control" id="evpa11"
														name="evpa11" value="" placeholder="正确答案" required>
												</div>
											</div>
										</div>
										<div class="form-group">
											<div class="col-sm-offset-2 col-sm-10">
												<input type="submit" class="btn btn-success" value="提交题目信息" />
											</div>
										</div>
									</form>
									<%-- 填空题 --%>
								</c:when>
								<c:when test="${param.type==3}">
									<form class="form-horizontal padding-horizontal-sm"
										method="post" action="${curl}">
										<%-- 指定操作类型 --%>
										<input type="hidden" name="operate" value="addform" />
										<%-- 记录来源页面 --%>
										<input type="hidden" name="returnurl" value="${comefromurl}" />
										<%-- 选择题类型3 --%>
										<input type="hidden" name="evType" value="3" />
										<%-- 选择题默认4个选项，可以调整为2~8个 --%>
										<input type="hidden" id="itnum3" name="itnum3" value="4" />
										<%-- 当前题号 --%>
										<input type="hidden" name="id" value="${param.id}" />
										<%-- 题目所属科目 --%>
										<!-- selectbox begin -->
										<div class="form-group">
											<label for="subject_id"
												class="col-sm-2 control-label text-right">所属科目</label>
											<div class="col-sm-10">
												<select class="selectbox" id="subject_id" name="subject_id"
													style="width: 100%;">
													<c:forEach var="it" items="${subjectlist}" varStatus="i">
														<option value="${it.id}"
															<c:if test="${it.id==param.sid}">selected</c:if>>${it.name}</option>
													</c:forEach>
												</select>
											</div>
										</div>
										<!-- selectbox end -->
										<div id="form3">
											<div class="form-group">
												<label for="difficulty"
													class="col-sm-2 control-label text-right">难度</label>
												<div class="col-sm-10">
													<input type="number" class="form-control restrictnumber"
														min="1" max="5" maxlength="1" id="difficulty"
														name="difficulty" placeholder="难度" value="3" required>
												</div>
											</div>
											<div class="form-group">
												<label for="difficulty"
													class="col-sm-2 control-label text-right">问题</label>
												<div class="col-sm-8">
													<textarea rows="3" style="width: 100%;"
														class="form-control" placeholder="问题题目" id="evptitle1"
														name="evptitle1">${item.title}</textarea>
												</div>
												<div class="col-sm-2">
													<input class="btn btn-info" type="button" id="add3"
														value="加" /> <input class="btn btn-info" type='button'
														id="delete3" value='减' />
												</div>
											</div>
											<div class="clearfix"></div>
											<c:forEach var="ita" begin="1" end="4" varStatus="i">
												<div class="form-group">
													<label for="evpContent"
														class="col-sm-2 control-label text-right">备选答案${i.count}</label>
													<div class="col-sm-8">
														<input class="form-control" type="text"
															id="evpa3${i.count}" name="evpa3${i.count}" value=""
															placeholder="备选答案" required />
													</div>
													<div class="col-sm-2">
														<div
															class="checkbox3 checkbox-inline checkbox-check checkbox-light">
															<input type="checkbox" id="tevpa3${i.count}"
																name="tevpa3${i.count}"> <label
																for="tevpa3${i.count}"> 正确答案 </label>
														</div>
													</div>
												</div>
											</c:forEach>
										</div>
										<div class="form-group">
											<div class="col-sm-offset-2 col-sm-10">
												<input type="submit" class="btn btn-success" value="提交题目信息" />
											</div>
										</div>
									</form>
								</c:when>
								<c:when test="${param.type==4}">
									<%-- 判断题的修改 --%>
									<form class="form-horizontal padding-horizontal-sm"
										method="post" action="${curl}">
										<%-- 指定操作类型 --%>
										<input type="hidden" name="operate" value="addform" />
										<%-- 记录来源页面 --%>
										<input type="hidden" name="returnurl" value="${comefromurl}" />
										<%-- 判断题类型1 --%>
										<input type="hidden" name="evType" value="4" />
										<%-- 默认1个标准答案，可以调整为多个 --%>
										<input type="hidden" id="itnum4" name="itnum4" value="1" />
										<%-- 当前题号 --%>
										<input type="hidden" name="id" value="${param.id}" />
										<%-- 题目所属科目 --%>
										<!-- selectbox begin -->
										<div class="form-group">
											<label for="subject_id"
												class="col-sm-2 control-label text-right">所属科目</label>
											<div class="col-sm-10">
												<select class="selectbox" id="subject_id" name="subject_id"
													style="width: 100%;">
													<c:forEach var="it" items="${subjectlist}" varStatus="i">
														<option value="${it.id}"
															<c:if test="${it.id==param.sid}">selected</c:if>>${it.name}</option>
													</c:forEach>
												</select>
											</div>
										</div>
										<!-- selectbox end -->
										<%-- 编号和一致evType --%>
										<div id="form4">
											<div class="form-group">
												<label for="difficulty"
													class="col-sm-2 control-label text-right">难度</label>
												<div class="col-sm-10">
													<input type="number" class="form-control restrictnumber"
														min="1" max="5" maxlength="1" id="difficulty"
														name="difficulty" placeholder="难度" value="3" required>
												</div>
											</div>
											<div class="form-group">
												<label for="difficulty"
													class="col-sm-2 control-label text-right">问题</label>
												<div class="col-sm-10">
													<textarea rows="3" style="width: 100%;"
														class="form-control" placeholder="问题题目" id="evptitle1"
														name="evptitle1"></textarea>
												</div>

											</div>
											<div class="clearfix"></div>
											<div class="form-group">
												<label for="evpContent"
													class="col-sm-2 control-label text-right">正确答案</label>
												<div class="col-sm-10">
													<div
														class="checkbox3 checkbox-inline checkbox-check checkbox-light">
														<input type="checkbox" id="tevpa41" name="tevpa41">
														<label for="tevpa41"> 正确 </label>
													</div>
												</div>
											</div>
										</div>
										<div class="form-group">
											<div class="col-sm-offset-2 col-sm-10">
												<input type="submit" class="btn btn-success" value="提交题目信息" />
											</div>
										</div>
									</form>
								</c:when>
								<c:when test="${param.type==5}">
									<%-- 问答题的修改 --%>
									<form class="form-horizontal padding-horizontal-sm"
										method="post" action="${curl}">
										<%-- 指定操作类型 --%>
										<input type="hidden" name="operate" value="addform" />
										<%-- 问答题类型5 --%>
										<input type="hidden" name="evType" value="5" />
										<%-- 默认答案数，就算没有答案也要有这个参数 --%>
										<input type="hidden" id="itnum5" name="itnum5" value="2" />
										<%-- 题目所属科目 --%>
										<!-- selectbox begin -->
										<div class="form-group">
											<label for="subject_id"
												class="col-sm-2 control-label text-right">所属科目</label>
											<div class="col-sm-10">
												<select class="selectbox" id="subject_id" name="subject_id"
													style="width: 100%;">
													<c:forEach var="it" items="${subjectlist}" varStatus="i">
														<option value="${it.id}"
															<c:if test="${it.id==param.sid}">selected</c:if>>${it.name}</option>
													</c:forEach>
												</select>
											</div>
										</div>
										<!-- selectbox end -->
										<%-- 编号和一致evType --%>
										<div id="form5">
											<div class="form-group">
												<label for="evpContent"
													class="col-sm-2 control-label text-right">是否允许 </label>
												<div class="col-sm-2">
													<div
														class="checkbox3 checkbox-round checkbox-check checkbox-light">
														<input type="checkbox" id="tevpa51" name="tevpa51" />
														<label for="tevpa51"> 允许考生上传文件</label>
													</div>
												</div>
												<div class="col-sm-2">
													<div
														class="checkbox3 checkbox-round checkbox-check checkbox-light">
														<input type="checkbox" id="tevpa52" name="tevpa52" />
														<label for="tevpa52"> 允许用文字回答</label>
													</div>
												</div>
											</div>
											<div class="clearfix"></div>
											<div class="form-group">
												<label for="difficulty"
													class="col-sm-2 control-label text-right">难度</label>
												<div class="col-sm-10">
													<input type="number" class="form-control restrictnumber"
														min="1" max="5" maxlength="1" id="difficulty"
														name="difficulty" placeholder="难度" value="3" required>
												</div>
											</div>
											<div class="clearfix"></div>
											<div class="form-group">
												<label for="evpContent"
													class="col-sm-2 control-label text-right">问题 </label>
												<div class="col-sm-10">
													<textarea class="form-control" id="evptitle1"
														name="evptitle1"
														style="width: 100%; height: 300px; visibility: hidden;"></textarea>
												</div>
											</div>
										</div>
										<div class="form-group margin-bottom-xl">
											<div class="col-sm-9 col-sm-push-2">
												<input type="submit" class="btn btn-primary" value="提交题目信息" />
											</div>
										</div>
									</form>
								</c:when>
								<%-- 问答 --%>
								<c:when test="${param.type==6}">
									<%-- 问答题的修改 --%>
									<form class="form-horizontal padding-horizontal-sm "
										method="post" action="${curl}">
										<%-- 指定操作类型 --%>
										<input type="hidden" name="operate" value="addform" />
										<%-- 记录来源页面 --%>
										<input type="hidden" name="returnurl" value="${comefromurl}" />
										<%-- 问答题类型5 --%>
										<input type="hidden" name="evType" value="6" />
										<%-- 默认答案数，就算没有答案也要有这个参数 --%>
										<input type="hidden" id="itnum6" name="itnum6" value="2" />
										<%-- 当前题号 --%>
										<input type="hidden" name="id" value="${param.id}" />
										<%-- 题目所属科目 --%>
										<!-- selectbox begin -->
										<div class="form-group">
											<label for="subject_id"
												class="col-sm-2 control-label text-right">所属科目</label>
											<div class="col-sm-10">
												<select class="selectbox" id="subject_id" name="subject_id"
													style="width: 100%;">
													<c:forEach var="it" items="${subjectlist}" varStatus="i">
														<option value="${it.id}"
															<c:if test="${it.id==param.sid}">selected</c:if>>${it.name}</option>
													</c:forEach>
												</select>
											</div>
										</div>
										<!-- selectbox end -->
										<%-- 编号和一致evType --%>
										<div id="form6">
											<div class="form-group">
												<label for="evpContent"
													class="col-sm-2 control-label text-right">是否允许 </label>
												<div class="col-sm-2">
													<div
														class="checkbox3 checkbox-round checkbox-check checkbox-light">
														<input type="checkbox" id="tevpa61" name="tevpa61" />
														<label for="tevpa61"> 允许考生上传文件</label>
													</div>
												</div>
												<div class="col-sm-2">
													<div
														class="checkbox3 checkbox-round checkbox-check checkbox-light">
														<input type="checkbox" id="tevpa62" name="tevpa62"/>
														<label for="tevpa62"> 允许用文字回答</label>
													</div>
												</div>
											</div>
											<div class="clearfix"></div>
											<div class="form-group">
												<label for="difficulty"
													class="col-sm-2 control-label text-right">难度</label>
												<div class="col-sm-10">
													<input type="number" class="form-control restrictnumber"
														min="1" max="5" maxlength="1" id="difficulty"
														name="difficulty" placeholder="难度" value="3" required>
												</div>
											</div>
											<div class="clearfix"></div>
											<div class="form-group">
												<label for="evpContent"
													class="col-sm-2 control-label text-right">问题 </label>
												<div class="col-sm-10">
													<textarea class="form-control" id="evptitle1"
														name="evptitle1"
														style="width: 100%; height: 300px; visibility: hidden;"></textarea>
												</div>
											</div>
										</div>
										<div class="form-group margin-bottom-xl">
											<div class="col-sm-9 col-sm-push-3">
												<input type="submit" class="btn btn-primary" value="提交题目信息" />
											</div>
										</div>
									</form>
								</c:when>
							</c:choose>
							<!-- content end -->
						</div>
					</div>
					<!--End Advanced Tables -->
					<!-- div表格  (中大屏幕，表格显示) end -->
				</div>
				<!--End div Tables -->
				<!-- content end -->
				<jsp:include page="../inc/bsa_foot.jsp"></jsp:include>
			</div>
			<!-- /. PAGE INNER  -->
		</div>
	</div>
	<script type="text/javascript">
		KindEditor.ready(function(K) {
			var editor1 = K.create('textarea[name="evptitle1"]', {
				cssPath : '${basePath}bssets/ket/plugins/code/prettify.css',
				uploadJson : '${basePath}superadmin/uploadfile',
				fileManagerJson : '${basePath}superadmin/filemanager',
				allowFileManager : true,
				afterCreate : function() {
				}
			});
		});
		$(document)
				.ready(
						function() {
							$("#add1")
									.click(
											function() {
												//alert('hello');
												var t = $("#itnum1").val();
												//alert("增加一个文件上传,t=" + t);
												if (t < 8) {
													t++;
													var str = "<div class=\"form-group\"><label for=\"evpContent\" class=\"col-sm-2 control-label\">正确答案"
															+ t
															+ "</label><div class=\"col-sm-10\"><input type=\"text\" class=\"form-control\" id=\"evpa1"
				+t+"\" name=\"evpa1"+t+"\" placeholder=\"正确答案"+t+"\" required> </div></div>";
													$("#form1").append(str);
													$("#itnum1").val(t);
												} else {
													alert("不能增加了，最多8个正确答案！");
												}
											});
							$("body").on("click", "#delete1", function() {
								//alert('这里是动态元素添加的事件');								
								var t = $("#itnum1").val();
								if (t > 1) {
									$("#evpa1" + t).parent().parent().remove();
									t = t - 1;
									$("#itnum1").val(t);
								} else {
									alert("不能删除了，至少1个正确答案！");
								}
							});
							$("#add3")
									.click(
											function() {
												//alert('hello');
												var t = $("#itnum3").val();
												//alert("增加一个文件上传,t=" + t);
												if (t < 8) {
													t++;
													var str = "<div class=\"form-group\">	<label for=\"evpContent\" class=\"col-sm-2 control-label text-right\">备选答案"
															+ t
															+ "</label>	<div class=\"col-sm-8\">		<input class=\"form-control\" type=\"text\" id=\"evpa3"+t+"\" name=\"evpa3"+t+"\" value=\" \"			placeholder=\"备选答案\" required />	</div>	<div class=\"col-sm-2\">		<div class=\"checkbox3 checkbox-inline checkbox-check checkbox-light\">	 <input type=\"checkbox\" id=\"tevpa3"+t+"\" name=\"tevpa3"+t+"\"> <label				for=\"tevpa3"+t+"\"> 正确答案 </label>		</div>	</div></div>";
													$("#form3").append(str);
													$("#itnum3").val(t);
												} else {
													alert("不能增加了，最多8个选项！");
												}
											});
							$("body").on("click", "#delete3", function() {
								//alert('这里是动态元素添加的事件');								
								var t = $("#itnum3").val();
								if (t > 2) {
									$("#evpa3" + t).parent().parent().remove();
									t = t - 1;
									$("#itnum3").val(t);
								} else {
									alert("不能删除了，至少2个选项！");
								}
							});
						});
	</script>
</body>
</html>


