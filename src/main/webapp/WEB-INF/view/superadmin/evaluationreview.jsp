<!------------------------------->
<!---- Generated By Denny(luhox@qq.com), cslite for sm -->
<!---- Remarks: ItemListHTML-->
<!---- Date Generated: 2019-06-25 19:58:58-->
<!------------------------------->
<%@ page language="java" import="java.util.*" pageEncoding="UTF-8"%>
<c:set var="searchpanel" value="true"></c:set>
<c:set var="uploadfile" value="true"></c:set>
<!DOCTYPE html>
<html lang="zh-CN">
<head>
<jsp:include page="../inc/bsa_head.jsp"></jsp:include>
<!-- Custom Styles-->
<link href="bssets/css/bsat1-style.css" rel="stylesheet" />
<title>${pagetitle}-${appName}</title>
<style>
.dtb {
	line-height: 0.9rem;
}

.lineheight11rem {
	line-height: 1.1rem;
}

.lineheight20rem {
	line-height: 2rem;
}
</style>
</head>
<body>
	<div id="wrapper">
		<jsp:include page="../inc/bsa_navtop.jsp"></jsp:include>
		<!--/. NAV TOP  -->
		<jsp:include page="../inc/bsa_navside.jsp"></jsp:include>
		<!-- /. NAV SIDE  -->
		<div id="page-wrapper">
			<div class="header"></div>
			<div id="page-inner">
				<!-- content start -->
				<!-- div Tables -->
				<div class="panel panel-default">
					<!-- div表格  (中大屏幕，表格显示) begin -->
					<!-- Advanced Tables -->
					<div class="panel panel-default padding-horizontal-sm">
						<div class="row ">
							<div class="col-md-12 margin-vertical-sm">
								<a class="btn btn-sm btn-warning"
									href="superadmin/configevaluation?id=${param.evid}">回到考核管理页面</a>
							</div>
						</div>						
						<div class="row ">
						<hr>
							<div class="col-md-4">
								<c:if test="${evrecord.is_reviewed}">
									<span class="text-danger fontsize15em">当前考核已经评阅，总分</span>
									<span class="text-danger fontsize20em">${evrecord.score}</span>
								</c:if>
							</div>
							<div class="col-md-4">
								<form action="${basePath}superadmin/evaluationrecord" method="post">
									<input type="hidden" name="evrid" value="${evrecord.id}" /> <input
										type="hidden" name="evid" value="${param.evid}" /> <input
										type="hidden" name="studentid" value="${studentid}" />
									当前卷面汇总成绩：<input type="number" name="score" min="0" max="100"
										class="text-danger" style="font-size: 2em;" readonly
										value="<fmt:formatNumber type="number" pattern="###" value="${scoretotal}" />" />
									<input type="submit" class="btn btn-success btn-lg" value="提交" />
								</form>
								<c:if test="${evrecord.score !=  scoretotal}">
									<span class="text-danger">成绩有更新，请及时更新保存！</span>
								</c:if>
							</div>
							<div class="col-md-4">${student.name}<br>${student.sno}</div>
						</div>
						<div class="row padding-vertical-sm">
							<div class="col-md-12">
								<c:forEach var="it" items="${mqlist}" varStatus="i">
									<a class="btn btn-primary"
										href="superadmin/evaluationreview/?evid=${param.evid}&studentid=${param.studentid}#t${i.count}">第${i.count}题</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</c:forEach>
								<!-- 试题开始 -->
								<c:forEach var="it" items="${mqlist}" varStatus="i">
									<div class="margin-vertical-sm">
										<h3 id="t${i.count}">第${i.count}题：${it.type.name}题（共计${it.number*it.score}分，共${it.number}题，每题${it.score}分）</h3>
									</div>
<!-- 
1	填空
2	正则填空
3	选择
4	判断
5	简答
6	问答
 -->
									<c:choose>
										<c:when test="${it.type.id == 1 }">
											<!-- 选择 -->
											<c:forEach var="ep" items="${it.pevplist}" varStatus="j">
												<div class="dtb">
	<span class="text-success fontsize15em">已阅</span>
	<button class="evprbtn btn btn-warning" value="${ep.id}">
		<i class="fa fa-check-square-o" aria-hidden="true"> 重评</i>
	</button>
<%--  --%>
	<a class="btn btn-success" target="_blank"
	href="${basePath}superadmin/evprreview?evprid=${ep.id}">在新窗口作答</a>
													<h4>${j.count}.${ep.title}</h4>
													<c:forEach var="epas" items="${ep.answers}" varStatus="k">
														<c:choose>
															<c:when test="${epas.correct}">
																<br>
																<div class="text-success bg-success">【${epas.answer}】</div>
															</c:when>
															<c:otherwise>
																<br>
																<div class="text-info">【${epas.answer}】</div>
															</c:otherwise>
														</c:choose>
													</c:forEach>
													<c:if test="${ep.submited}">
														<br>
														<span class="text-success">已作答：${ep.reply}</span>
								得分：<span class="text-danger fontsize20em">${ep.score}</span>
													</c:if>
												</div>
												<hr>
											</c:forEach>

										</c:when>
										<c:when test="${it.type.id == 3 }">
											<!-- 选择 -->
											<c:forEach var="ep" items="${it.pevplist}" varStatus="j">
												<div class="dtb">
	<span class="text-success fontsize15em">已阅</span>
	<button class="evprbtn btn btn-warning" value="${ep.id}">
		<i class="fa fa-check-square-o" aria-hidden="true"> 重评</i>
	</button>
<%--  --%>
	<a class="btn btn-success" target="_blank"
	href="${basePath}superadmin/evprreview?evprid=${ep.id}">在新窗口作答</a>
													<h4>${j.count}.${ep.title}</h4>
													<c:forEach var="epas" items="${ep.answers}" varStatus="k">
														<c:choose>
															<c:when test="${epas.correct}">
																<br>
																<div style="color: red;">【${epas.answer}】</div>
															</c:when>
															<c:otherwise>
																<br>
																<div class="text-info">【${epas.answer}】</div>
															</c:otherwise>
														</c:choose>
													</c:forEach>
													<c:if test="${ep.submited}">
														<br>
														<span class="text-success">已作答：${ep.reply}</span>
								得分：<span class="text-danger fontsize20em">${ep.score}</span>
													</c:if>
												</div>
												<hr>
											</c:forEach>

										</c:when>
										<c:when test="${it.type.id == 4 }">
											<!-- 判断 -->
											<c:forEach var="ep" items="${it.pevplist}" varStatus="j">
												<div class="dtb">
	<span class="text-success fontsize15em">已阅</span>
	<button class="evprbtn btn btn-warning" value="${ep.id}">
		<i class="fa fa-check-square-o" aria-hidden="true"> 重评</i>
	</button>
<%--  --%>
	<a class="btn btn-success" target="_blank"
	href="${basePath}superadmin/evprreview?evprid=${ep.id}">在新窗口作答</a>
													<h4>${j.count}.${ep.title}</h4>
													<c:forEach var="epas" items="${ep.answers}" varStatus="k">
														<c:choose>
															<c:when test="${epas.correct}">
																<br>
																<div style="color: red;">【${epas.correct}】</div>
															</c:when>
															<c:otherwise>
																<br>
																<div class="text-info">【${epas.correct}】</div>
															</c:otherwise>
														</c:choose>
													</c:forEach>
													<c:if test="${ep.submited}">
														<br>
														<span class="text-success">已作答：${ep.reply}</span>
								得分：<span class="text-danger fontsize20em">${ep.score}</span>
													</c:if>
												</div>
												<hr>
											</c:forEach>

										</c:when>
										<c:when test="${it.type.id == 5 || it.type.id == 6}">
											<!-- 简答 -->
											<c:forEach var="ep" items="${it.pevplist}" varStatus="j">
												<div class="row  ">
													<div class="col-md-8"></div>
												</div>
												<div class="row padding-horizontal-sm ">
													<h5 class="lineheight20rem">${j.count}.
														<c:choose>
															<c:when test="${ep.submited}">
																<span class="text-danger fontsize15em">得分：${ep.score}</span>
		&nbsp;&nbsp;&nbsp;&nbsp;
		<c:if test="${ep.reviewed==false}">
																	<span class="text-success fontsize15em">考生已经提交</span>
																	<button class="evprbtn btn btn-info" value="${ep.id}">
																		<i class="fa fa-check-square-o" aria-hidden="true">
																			评阅</i>
																	</button>
																</c:if>
																<c:if test="${ep.reviewed}">
																	<span class="text-success fontsize15em">已经评阅</span>
																	<button class="evprbtn btn btn-warning"
																		value="${ep.id}">
																		<i class="fa fa-check-square-o" aria-hidden="true">
																			重评</i>
																	</button>
																</c:if>
																<%--  --%>
																<a class="btn btn-success" target="_blank"
																	href="${basePath}superadmin/evprreview?evprid=${ep.id}">在新窗口作答</a>

															</c:when>
															<c:when test="${ep.submited==false}">
																<span class="text-danger fontsize15em">考生未提交该题目</span>
<button class="evprbtn btn btn-danger" value="${ep.id}">
	<i class="fa fa-check-square-o" aria-hidden="true">
		评阅</i>
</button>
<%--  --%>
<a class="btn btn-success" target="_blank"
	href="${basePath}superadmin/evprreview?evprid=${ep.id}">在新窗口作答</a>
																<hr>
															</c:when>
														</c:choose>
														${ep.title}
													</h5>
													<c:if test="${ep.submited}">
														<span class="text-warning">${ep.reply}</span>
														<c:if test="${fn:length(ep.filelist) > 0}">
								已经上传文件：${fn:length(ep.filelist)}个；
									<c:forEach var="epfile" items="${ep.filelist}" varStatus="k">
																<a href="superadmin/evrdownload?filehash=${epfile.filehash}"
																	class="btn btn-default">${epfile.filename}</a>
															</c:forEach>
														</c:if>
													</c:if>
												</div>
												<hr>
											</c:forEach>
										</c:when>
										<c:when test="${it.type.id == 7}">
											<!-- 简答 -->
											<c:forEach var="ep" items="${it.pevplist}" varStatus="j">
												<div class="row  ">
													<div class="col-md-8"></div>
												</div>
												<div class="row padding-horizontal-sm ">
													<h5 class="lineheight20rem">${j.count}.
														<c:choose>
															<c:when test="${ep.submited}">
																<span class="text-danger fontsize15em">得分：${ep.score}</span>
		&nbsp;&nbsp;&nbsp;&nbsp;
		<c:if test="${ep.reviewed==false}">
																	<span class="text-success fontsize15em">考生已经提交</span>
																	<button class="evprbtn btn btn-info" value="${ep.id}">
																		<i class="fa fa-check-square-o" aria-hidden="true">
																			评阅</i>
																	</button>
																</c:if>
																<c:if test="${ep.reviewed}">
																	<span class="text-success fontsize15em">已经评阅</span>
																	<button class="evprbtn btn btn-warning"
																		value="${ep.id}">
																		<i class="fa fa-check-square-o" aria-hidden="true">
																			重评</i>
																	</button>
																</c:if>
																<%--  --%>
																<a class="btn btn-success" target="_blank"
																	href="${basePath}superadmin/evprreview?evprid=${ep.id}">在新窗口作答</a>

															</c:when>
															<c:when test="${ep.submited==false}">
																<span class="text-danger fontsize15em">考生未提交该题目</span>
<button class="evprbtn btn btn-danger" value="${ep.id}">
	<i class="fa fa-check-square-o" aria-hidden="true">
		评阅</i>
</button>
<%--  --%>
<a class="btn btn-success" target="_blank"
	href="${basePath}superadmin/evprreview?evprid=${ep.id}">在新窗口作答</a>
																<hr>
															</c:when>
														</c:choose>
														${ep.title}
													</h5>
													<c:if test="${ep.submited}">
														<span class="text-warning">${ep.reply}</span>
														<c:if test="${fn:length(ep.filelist) > 0}">
								已经上传文件：${fn:length(ep.filelist)}个；
									<c:forEach var="epfile" items="${ep.filelist}" varStatus="k">
																<a href="superadmin/evrdownload?filehash=${epfile.filehash}"
																	class="btn btn-default">${epfile.filename}</a>
															</c:forEach>
														</c:if>
													</c:if>
												</div>
												<hr>
											</c:forEach>
										</c:when>
										
									</c:choose>
								</c:forEach>
								<!-- 试题结束 -->
								<br> <br> <br>
								<form action="admin/evaluationrecord" method="post">
									<input type="hidden" name="evrid" value="${evrecord.id}" /> <input
										type="hidden" name="evid" value="${param.evid}" /> <input
										type="hidden" name="studentid" value="${studentid}" /> <input
										type="number" name="score" min="0" max="100"
										class="text-danger" style="font-size: 2em;" readonly
										value="<fmt:formatNumber type="number" pattern="###" value="${scoretotal}" />" />
									<input type="submit" class="btn btn-primary" value="提交" />
								</form>
								<c:if test="${evrecord.score !=  scoretotal}">
									<span class="text-danger fontsize20em">成绩有更新，请及时更新保存！</span>
								</c:if>
								<br> <br> <br> <br> <br>
							</div>
						</div>
					</div>
					<!--End Advanced Tables -->
					<!-- div表格  (中大屏幕，表格显示) end -->
				</div>
				<!--End div Tables -->
				<!-- content end -->
				<jsp:include page="../inc/bsa_foot.jsp"></jsp:include>
			</div>
			<!-- /. PAGE INNER  -->
		</div>
	</div>
	<script type="text/javascript">
		$(document).ready(
				function() {
					$(".evprbtn").click(
							function() {
								//alert("url="+"${basePath}student/evprshow/"+$(this).val());
								jeBox({
									title : "评阅面板",
									type : 'iframe',
									maxBtn : true,
									padding : "0",
									boxSize : [ "90%", "90%" ],
									content : [
											"${basePath}superadmin/evprreview?evprid="
													+ $(this).val(), 'yes' ], //iframe的url，no代表不显示滚动条
									maskLock : true
								});
							});
				});
	</script>
</body>

</html>


